# 说明：

## xtrabackup

### 说明：

​      对于 xtrabackup 的备份脚本，支持如下：

* 支持钉钉告警
* 支持邮件告警
* 支持压缩备份与非压缩备份
* 不需要的功能可使用功能开关开启或关闭
* 关闭的功能参数可设置为""

### 限制：

* 配置文件名称需要为backup_config.txt，若更改需同步更改.sh脚本中的名称

  ```shell
  # 加载配置文件信息
  while read line;do
      eval "$line"
  done < backup_config.txt  # 若更改了配置文件名称，须修改此处的名称为对应
  ```

* 使用远程传输功能需要配置宿主机对远程服务器的ssh免密
* 使用邮件功能需要安装sendemail
* 配置参数文件中 基础信息配置、Mysql备份用户信息、功能开关必须配置
* 需要安装与库对应版本的xtrabackup[5.6，5.7--> xtrabackup 2.4 / 8.0 --> xtrabackup 8.0.x ]

### 配置示例：

#### 钉钉告警配置：

1. 新建钉钉群
2. 设置钉钉机器人
3. 获得对应的webhook地址
4. 配置到配置文件中
5. 打开钉钉告警开关

#### 邮件告警配置：

1. 备份服务端安装sendemail
2. 发件人、收件人邮箱准备
3. 登陆发件人邮箱，开启smtp服务，获得对应的授权码
4. 获取发件人 smtp服务器地址
5. 将相关配置配置到配置文件中
6. 打开邮件告警开关
